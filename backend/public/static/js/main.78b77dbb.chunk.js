(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{169:function(e,t,a){e.exports=a(328)},328:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(34),c=a.n(o),r=a(142),s=a(143),i=a(144),u=a(157),d=a(145),h=a(158),m=a(46),g=a.n(m),f=a(335),p=a(341),E=a(339),S=a(338),v=a(340),y=a(337),x=a(336),C=(a(193),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).state={isLoading:!1,value:"",results:[],loading:!1,currentProduct:null,title:"",size:"",content:"",SearchResults:[]},a.handleResultSelect=function(e,t){var n=t.result;a.setState({loading:!0}),g.a.get("/fetch/product?id="+n._id).then(function(e){a.setState({value:e.title,currentProduct:e.data.data})}).catch(function(e){return console.log(e)}).then(function(){a.setState({loading:!1})})},a.performSearch=function(){g.a.get("/search/normal?text="+a.state.searchText).then(function(e){console.log(e),e.data.data.map(function(e){return e.title=e._source.title}),a.setState({SearchResults:e.data.data})}).catch(function(e){return console.log(e)}).then(function(){a.setState({loading:!1})})},a.handleChange=function(e,t){a.setState(Object(r.a)({},e,t.target.value))},a.handleSearchChange=function(e){a.setState({searchText:e.target.value}),g.a.get("/search/autocomplete?text="+e.target.value).then(function(e){console.log(e.data.data),e.data.data.map(function(e){return e.title=e._source.title}),a.setState({results:e.data.data})}).catch(function(e){return console.log(e)})},a.addToDB=function(){""!==a.state.title&&""!==a.state.content&&""!==a.state.size&&g.a.post("/insert",{title:a.state.title,content:a.state.content,size:a.state.size}).then(function(e){console.log(e.data),e.data.error||a.setState({title:"",size:"",content:""})}).catch(function(e){return console.log(e)})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.results,o=t.currentProduct,c=t.SearchResults,r=this.handleResultSelect;return console.log(c),l.a.createElement(f.a,null,l.a.createElement(p.a,{style:{margin:"10px"},textAlign:"center",as:"h1"},"JP Tokyo 0.1a"),l.a.createElement(p.a,{style:{margin:"10px"},textAlign:"center",as:"h5"},"This is a simple implementation of full text autocomplete search using nodejs, mongodb and elastic search."),l.a.createElement("div",{style:{margin:"20px",display:"flex",justifyContent:"center"}},l.a.createElement(E.a,{loading:a,onResultSelect:this.handleResultSelect,onSearchChange:this.handleSearchChange,results:n,noResultsMessage:"Search DB"}),l.a.createElement(S.a,{onClick:this.performSearch,style:{marginLeft:10}},"Search")),l.a.createElement(v.a,{columns:"two",divided:!0},l.a.createElement(v.a.Row,null,l.a.createElement(v.a.Column,null,l.a.createElement("div",null,l.a.createElement(p.a,{textAlign:"center"},"Selected Result"),!this.state.isLoading&&null!=this.state.currentProduct&&l.a.createElement(y.a,{style:{width:"100%"}},l.a.createElement(y.a.Content,null,l.a.createElement(y.a.Header,null,o.title),l.a.createElement(y.a.Meta,null,o.size),l.a.createElement(y.a.Description,null,o.content)),l.a.createElement(y.a.Content,{extra:!0},l.a.createElement("div",{className:"ui two buttons"},l.a.createElement(S.a,{basic:!0,color:"green"},"Request a quote"),l.a.createElement(S.a,{basic:!0,color:"blue"},"Contact")))))),l.a.createElement(v.a.Column,{style:{height:300,overflow:"auto"}},l.a.createElement(p.a,{textAlign:"center"},"Search Results"),c.map(function(e,t){return l.a.createElement(y.a,{key:e._id,style:{width:"100%"}},l.a.createElement(y.a.Content,null,l.a.createElement(y.a.Header,null,e.title),JSON.stringify(e._source.size)),l.a.createElement(y.a.Content,{extra:!0},l.a.createElement("div",{className:"ui two buttons"},l.a.createElement(S.a,{onClick:function(){return r(null,{result:e})},disabled:o&&o._id===e._id,basic:!0,color:"blue"},"Open"))))})))),l.a.createElement(p.a,{textAlign:"center",as:"h1"},"Add to mongoDB"),l.a.createElement(p.a,{textAlign:"center",as:"h5"},"mongo-connector python plugin should automatically sync the elastic search and mongodb in background"),l.a.createElement(x.a,{onChange:function(t){return e.handleChange("title",t)},value:this.state.title,style:{margin:"10px"},placeholder:"Title"}),l.a.createElement(x.a,{onChange:function(t){return e.handleChange("size",t)},value:this.state.size,style:{margin:"10px"},placeholder:"Sizes(comma seperated values)"}),l.a.createElement(x.a,{onChange:function(t){return e.handleChange("content",t)},value:this.state.content,style:{margin:"10px"},placeholder:"Content"}),l.a.createElement(S.a,{onClick:this.addToDB},"Add to mongodb"),l.a.createElement("div",{style:{position:"fixed",bottom:"10px",right:"10px"}},"Made by Meetesh Mehta"))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[169,2,1]]]);
//# sourceMappingURL=main.78b77dbb.chunk.js.map